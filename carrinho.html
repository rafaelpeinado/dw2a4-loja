<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet"> 
    <title>Página Inicial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="css/style.css">
    <script src="javascript/javascript.js"></script>
    <script src="jquery/jquery-3.4.1.min.js"></script>
</head>
<body>
    <header>
        <div id="cabecalho">
            <div>
                <a href="index.html"><img id="livraria" src="images/livraria.png"></a>
            </div>
            <div id="div-busca">
                <input id="busca" type="text" placeholder="O que você procura?">
                <button id="botao-busca"><img src="images/lupa.png"></button>
            </div>
            <div>
                <a href="carrinho.html"><img id="cart" src="images/cart.png"></a>
                <span id="qtdeCart">0</span>
            </div>
        </div>
    </header>
    <nav>
        <div id="navegacao">
            <ul>
                <li><a href="index.html">Início</a></li>
                <li><a href="sobre.html">Sobre</a></li>
                <li><a href="equipe.html">Equipe</a></li>
            </ul>
        </div>
    </nav>
    <section>
        <div id="geral">
            <div class="container">
                <div id="carrinho">
                    <div>
                        <h2>Meu Carrinho</h2>
                    </div>
                    <div id="lista-detalhes">
                        <div id="lista-carrinho" >
                                <div class="produto-carrinho" id="titulo">
                                    <div></div>
                                    <div>Item</div>
                                    <div>Preço</div>
                                    <div>Quantidade</div>
                                    <div>Subtotal</div>
                                    <div></div>
                                </div>                
                        </div>
                        <div id="finalizacao-compra">
                            <div>
                                <span>Total</span>
                                <span id="total">R$ </span>
                            </div>      
                            <div>
                                <a href="index.html">Comprar mais produtos</a>
                            </div>                      
                            <div id="confirmar-compra">
                                <a href="#">Finalizar Pedido</a>
                            </div>
                        </div>
                    </div>
                    

                </div>
            </div>
        </div>
        <script>
                $.getJSON('json/loja.json', function(data) {
                    var item;
                    var total = 0.0;
                    var subtotal = 0.0;
                    
                    $.each(data, function(i, livro) {
                        subtotal = ((parseFloat(livro.preco.replace(',', '.')))*2);
                        total += subtotal;
                        item = "<div class='produto-carrinho' id='livro" + livro.id + "'>" + 
                                    "<div class='imagem-carrinho'>" +
                                        "<img src='" + livro.capa + "'>" + 
                                    "</div>" + 
                                    "<div class='nome-livro-carrinho'>" +
                                        "<span>" + livro.titulo + "</span>" + 
                                    "</div>" +
                                    "<div class='preco-carrinho'>" +
                                            "<span> R$ " + livro.preco + "</span>" +
                                        "</div>" +
                                    "<div class='quantidade-carrinho'>" + 
                                        "<div class='menos-qtde'><span>-</span></div><div><span>" + 2 + "</span></div><div class='mais-qtde'><span>+</span></div>" +
                                    "</div>" +
                                    "<div class='subtotal-carrinho'>" + 
                                        "<span>R$ " + (subtotal.toFixed(2)).toString().replace('.', ',') + "</span>" +
                                    "</div>" +
                                    "<div class='remover-carrinho'>" +
                                        "<a onclick='removerCarrinho(" + livro.id + ");' href='#'><span class='texto-carrinho'>x</span></a>" +
                                    "</div>" +
                                "</div>";
                        $("#lista-carrinho").append(item);
                    });
                    $("#total").append(total.toFixed(2).toString().replace('.', ','));
                });
            </script>
    </section>
    <footer>
        <div id="rodape">
            <span>&#169; 2019-2019 - Instituto Federal de São Paulo</span>
            <small>Rua Pedro Vicente, nº 625 - Canindé - São Paulo - SP - CEP: 01109-010</small>
        </div>
    </footer>


</body>
</html>